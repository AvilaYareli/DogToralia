{"ast":null,"code":"import _regeneratorRuntime from \"C:/YARELI/New/VUE/DogToralia/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/YARELI/New/VUE/DogToralia/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport axios from 'axios';\nimport Swal from 'sweetalert2';\nexport default {\n  data: function data() {\n    return {\n      estilista: [],\n      error: null,\n      filterQuery: \"\"\n    };\n  },\n  created: function created() {\n    this.listarNegocios();\n  },\n  watch: {\n    filterQuery: function filterQuery(search) {\n      var filteredData = this.tableItems.filter(function (row) {\n        return estilista.name.toLowerCase().includes(search.toLowerCase()) || estilista.last_name.toLowerCase().includes(search.toLowerCase());\n      });\n      search == \"\" ? this.allData = this.tableItems : this.allData = filteredData;\n    }\n  },\n  methods: {\n    getFotoUrl: function getFotoUrl(profile_photo) {\n      var baseUrl = 'http://127.0.0.1:8000/storage/';\n      return \"\".concat(baseUrl).concat(profile_photo);\n    },\n    detalles: function detalles(id) {\n      this.$router.push({\n        name: 'detalleMinegocio',\n        params: {\n          id: id\n        }\n      });\n    },\n    agregar: function agregar() {\n      this.$router.push(\"/nuevo-negocio\");\n    },\n    listarNegocios: function listarNegocios() {\n      var _this = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var token, _token, myHeaders, requestOptions;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              token = localStorage.getItem('token');\n              if (token) {\n                _context.next = 5;\n                break;\n              }\n              _this.errorMessage = 'No se encontró ningún token, redireccionando para iniciar sesión';\n              _this.$router.push('/auth/login');\n              return _context.abrupt(\"return\");\n            case 5:\n              try {\n                _token = localStorage.getItem('token');\n                myHeaders = new Headers();\n                myHeaders.append(\"Content-Type\", \"application/json\");\n                myHeaders.append(\"Authorization\", \"Bearer \".concat(_token));\n                requestOptions = {\n                  method: \"GET\",\n                  headers: myHeaders,\n                  redirect: \"follow\"\n                }; // fetch(\"https://devs-devitm.com/api/business/all\", requestOptions)\n                fetch(\"http://127.0.0.1:8000/api/staff\", requestOptions).then(function (response) {\n                  return response.text();\n                }).then(function (result) {\n                  var datos = JSON.parse(result);\n                  _this.estilista = datos.stylists;\n                });\n              } catch (err) {\n                console.log('Error al obtener los negocios:', err);\n                _this.error = 'Error al obtener los detalles de los negocios';\n              }\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }))();\n    }\n  }\n};","map":{"version":3,"names":["axios","Swal","data","estilista","error","filterQuery","created","listarNegocios","watch","search","filteredData","tableItems","filter","row","name","toLowerCase","includes","last_name","allData","methods","getFotoUrl","profile_photo","baseUrl","concat","detalles","id","$router","push","params","agregar","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","token","_token","myHeaders","requestOptions","wrap","_callee$","_context","prev","next","localStorage","getItem","errorMessage","abrupt","Headers","append","method","headers","redirect","fetch","then","response","text","result","datos","JSON","parse","stylists","err","console","log","stop"],"sources":["C:\\YARELI\\New\\VUE\\DogToralia\\src\\pages\\admin\\personal\\listPersonal.vue"],"sourcesContent":["<template>\r\n  <div class=\"col-sm-12\">\r\n             <div class=\"card\">\r\n               <div class=\"card-header pb-0\">\r\n                 <h4>Zero Configuration</h4><span>DataTables has most features enabled by default, so all you need to do to use it with your own tables is to call the construction function:<code>$().DataTable();</code>.</span><span>Searching, ordering and paging goodness will be immediately added to the table, as shown in this example.</span>\r\n               </div>\r\n               <div class=\"card-body\">\r\n                 <div class=\"table-responsive theme-scrollbar data-table\">\r\n                <form>\r\n           <div class=\"mb-3 row justify-content-end\">\r\n             <label for=\"table-complete-search\" class=\"col-xs-3 col-sm-auto col-form-label\">Search:</label>\r\n             <div class=\"col-xs-3 col-sm-auto\">\r\n               <input id=\"table-complete-search\" type=\"text\" class=\"form-control\" v-model=\"filterQuery\" >\r\n             </div>\r\n           </div>\r\n           <table class=\"table table-striped table-bordered\">\r\n             <thead>  \r\n               <tr>\r\n                 <th scope=\"col\" sortable=\"name\" >Nombre</th>\r\n                 <th scope=\"col\" sortable=\"invoice\" >Correo</th>\r\n                 <th scope=\"col\" sortable=\"position\" >Telefono</th>\r\n                 <th scope=\"col\" >Action</th>\r\n               </tr>\r\n             </thead>\r\n\r\n             <tbody>\r\n              <tr v-for=\"estilista in estilista\" :key=\"estilista.id\">\r\n               <td scope=\"row\">\r\n                 <img class=\"img-40 me-2\"  :src=\"getFotoUrl(estilista.profile_photo)\" alt=\"\">{{estilista.name }} {{estilista.last_name }}</td>\r\n               <td>{{estilista.email }}</td>\r\n               <td>{{estilista.phone_number }}</td>\r\n               <td  class=\"text-center\">\r\n                <span>\r\n                   <span  @click=\"editar(pet.id)\">\r\n                    <i class=\"fa fa-pencil fa-lg\"></i>\r\n                   </span> \r\n                 </span>\r\n                <span>\r\n                   <span @click=\"eliminar(pet.id)\">\r\n                     <i class=\"icofont icofont-close-circled font-danger ps-2\"></i>\r\n                   </span> \r\n                 </span>\r\n               </td>\r\n             </tr>\r\n             </tbody>\r\n           </table>\r\n                <!-- <ul class=\"pagination m-3 justify-content-end pagination-primary\" >\r\n                    <li class=\"page-item\"> <a class=\"page-link\" href=\"#\" aria-label=\"Previous\"><span aria-hidden=\"true\">&laquo;</span></a></li>\r\n                    <li  class=\"page-item\" v-for=\"i in num_pages()\" :key=\"i\" v-bind:class=\"[i == currentPage ? 'active' : '']\" v-on:click=\"change_page(i)\">\r\n                      <a class=\"page-link\">{{ i }}</a>\r\n                    </li>\r\n                  <li class=\"page-item\"><a class=\"page-link\" href=\"#\" aria-label=\"Next\"><span aria-hidden=\"true\">&raquo;</span></a></li>\r\n              </ul> -->\r\n         </form>\r\n       </div>\r\n               </div>\r\n             </div>\r\n           </div>\r\n</template>\r\n<script>\r\n import axios from 'axios';\r\n  import Swal from 'sweetalert2';\r\n  export default {\r\n    data() {\r\n      return {\r\n        estilista: [],\r\n        error: null,\r\n        filterQuery: \"\",\r\n        \r\n      };\r\n    },\r\n    created() {\r\n      this.listarNegocios();\r\n    },\r\n    watch: {\r\n    filterQuery(search) {\r\n      var filteredData = this.tableItems.filter((row) => {\r\n        return (\r\n          estilista.name.toLowerCase().includes(search.toLowerCase()) ||\r\n          estilista.last_name .toLowerCase().includes(search.toLowerCase()) \r\n        );\r\n      });\r\n      search==\"\" ? this.allData = this.tableItems :this.allData = filteredData\r\n    },\r\n  },\r\n    methods: {\r\n         getFotoUrl(profile_photo) {\r\n         const baseUrl = 'http://127.0.0.1:8000/storage/';\r\n          return `${baseUrl}${profile_photo}`;\r\n    },\r\n        detalles(id){\r\n            this.$router.push({ name: 'detalleMinegocio', params: { id: id } });\r\n        },\r\n      \r\n        agregar(){\r\n            this.$router.push(\"/nuevo-negocio\");\r\n        },\r\n      async listarNegocios() {\r\n        const token = localStorage.getItem('token');\r\n      if (!token) {\r\n        this.errorMessage = 'No se encontró ningún token, redireccionando para iniciar sesión';\r\n        this.$router.push('/auth/login');\r\n        return;\r\n      }\r\n        try {\r\n            const token=localStorage.getItem('token');\r\n            const myHeaders = new Headers();\r\n            myHeaders.append(\"Content-Type\", \"application/json\");\r\n            myHeaders.append(\"Authorization\", `Bearer ${token}`);\r\n\r\n                const requestOptions = {\r\n                method: \"GET\",\r\n                headers: myHeaders,\r\n                redirect: \"follow\"\r\n                };\r\n\r\n                // fetch(\"https://devs-devitm.com/api/business/all\", requestOptions)\r\n                fetch(\"http://127.0.0.1:8000/api/staff\", requestOptions)\r\n                .then((response) => response.text())\r\n                .then((result) => {\r\n                    let datos = JSON.parse( result);                   \r\n                    this.estilista = datos.stylists;\r\n\r\n                });                \r\n      \r\n             } catch (err) {\r\n                console.log('Error al obtener los negocios:', err);\r\n                this.error = 'Error al obtener los detalles de los negocios';    \r\n            }\r\n      },\r\n     \r\n    }\r\n};\r\n\r\n \r\n</script>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}