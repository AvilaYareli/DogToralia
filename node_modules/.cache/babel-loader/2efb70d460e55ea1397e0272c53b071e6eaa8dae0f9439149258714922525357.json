{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_l_tile_layer = _resolveComponent(\"l-tile-layer\");\n  var _component_l_marker = _resolveComponent(\"l-marker\");\n  var _component_l_map = _resolveComponent(\"l-map\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_createVNode(_component_l_map, {\n    zoom: 13,\n    center: $data.center,\n    style: {\n      \"height\": \"500px\",\n      \"width\": \"100%\"\n    },\n    onClick: $options.setLocation\n  }, {\n    \"default\": _withCtx(function () {\n      return [_createVNode(_component_l_tile_layer, {\n        url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      }), _createVNode(_component_l_marker, {\n        \"lat-lng\": $data.marker\n      }, null, 8 /* PROPS */, [\"lat-lng\"])];\n    }),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"center\", \"onClick\"]), _createElementVNode(\"div\", null, [_createCommentVNode(\" <p>Latitud: {{ marker.lat }}</p>\\r\\n        <p>Longitud: {{ marker.lng }}</p> \"), _createElementVNode(\"button\", {\n    \"class\": \"btn btn-secondary\",\n    onClick: _cache[0] || (_cache[0] = function () {\n      return $options.submitLocation && $options.submitLocation.apply($options, arguments);\n    })\n  }, \"Enviar ubicación\")])]);\n}","map":{"version":3,"names":["_createElementBlock","_createVNode","_component_l_map","zoom","center","$data","style","onClick","$options","setLocation","_withCtx","_component_l_tile_layer","url","_component_l_marker","marker","_","_createElementVNode","_createCommentVNode","_cache","submitLocation","apply","arguments"],"sources":["C:\\YARELI\\New\\VUE\\DogToralia\\src\\pages\\user\\geolocalizacion.vue"],"sourcesContent":["<template>\r\n    <div>\r\n      <l-map\r\n        :zoom=\"13\"\r\n        :center=\"center\"\r\n        style=\"height: 500px; width: 100%;\"\r\n        @click=\"setLocation\"\r\n      >\r\n        <l-tile-layer\r\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n        ></l-tile-layer>\r\n        <l-marker :lat-lng=\"marker\"></l-marker>\r\n      </l-map>\r\n  \r\n      <div>\r\n        <!-- <p>Latitud: {{ marker.lat }}</p>\r\n        <p>Longitud: {{ marker.lng }}</p> -->\r\n        <button class=\"btn btn-secondary\" @click=\"submitLocation\">Enviar ubicación</button>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  \r\n  import { LMap, LTileLayer, LMarker } from '@vue-leaflet/vue-leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\n//   import { LMap, LTileLayer, LMarker } from \"vue-leaflet\";\r\n//   import \"leaflet/dist/leaflet.css\";\r\n  import axios from \"axios\";\r\n  import { useToast } from 'vue-toastification';\r\n  \r\n  export default {\r\n    components: {\r\n      LMap,\r\n      LTileLayer,\r\n      LMarker,\r\n    },\r\n    data() {\r\n      return {\r\n        center: [19.3942, -99.0757], // Coordenadas iniciales\r\n        marker: {\r\n          lat: 19.3942,\r\n          lng: -99.0757,\r\n        },\r\n      };\r\n    },\r\n    methods: {\r\n        //   ...mapActions(['refreshToken']),\r\n      setLocation(event) {\r\n        // Actualiza la ubicación del marcador\r\n        this.marker = {\r\n          lat: event.latlng.lat,\r\n          lng: event.latlng.lng,\r\n        };\r\n      },\r\n      async submitLocation() {\r\n        const toast = useToast(); // Definir toast aquí\r\n        // Enviar la latitud y longitud a la API\r\n        const token = localStorage.getItem('token');\r\n        const data = {\r\n          lat: this.marker.lat,\r\n          lon: this.marker.lng,\r\n        };\r\n  \r\n                    try {\r\n                const response = await axios.post(\r\n                'http://127.0.0.1:8000/api/pet-owner/set-address',\r\n                data,\r\n                {\r\n                    headers: {\r\n                    Authorization: `Bearer ${token}`,\r\n                    },\r\n                }\r\n                );\r\n                // alert('Ubicación enviada correctamente');\r\n                toast.success('Ubicación Registrada correctamente.');\r\n            } catch (error) {\r\n                console.error(error);\r\n                // alert('Error al enviar la ubicación');\r\n                toast.error(response.data.message || 'Error al enviar la ubicación');\r\n            }\r\n      },\r\n    },\r\n  };\r\n  </script>\r\n  \r\n  <style>\r\n  /* Ajusta el tamaño del mapa */\r\n  .l-map {\r\n    height: 500px;\r\n    width: 100%;\r\n  }\r\n  </style>"],"mappings":";;;;;uBACIA,mBAAA,CAkBM,cAjBJC,YAAA,CAUQC,gBAAA;IATLC,IAAI,EAAE,EAAE;IACRC,MAAM,EAAEC,KAAA,CAAAD,MAAM;IACfE,KAAmC,EAAnC;MAAA;MAAA;IAAA,CAAmC;IAClCC,OAAK,EAAEC,QAAA,CAAAC;;IANhB,WAAAC,QAAA,CAQQ;MAAA,OAEgB,CAFhBT,YAAA,CAEgBU,uBAAA;QADdC,GAAG,EAAC;MAAoD,IAE1DX,YAAA,CAAuCY,mBAAA;QAA5B,SAAO,EAAER,KAAA,CAAAS;MAAM,qC;;IAXlCC,CAAA;4CAcMC,mBAAA,CAIM,cAHJC,mBAAA,mFACqC,EACrCD,mBAAA,CAAmF;IAA3E,SAAM,mBAAmB;IAAET,OAAK,EAAAW,MAAA,QAAAA,MAAA;MAAA,OAAEV,QAAA,CAAAW,cAAA,IAAAX,QAAA,CAAAW,cAAA,CAAAC,KAAA,CAAAZ,QAAA,EAAAa,SAAA,CAAc;IAAA;KAAE,kBAAgB,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}