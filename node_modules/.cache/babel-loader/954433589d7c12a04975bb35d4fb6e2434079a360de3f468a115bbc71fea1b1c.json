{"ast":null,"code":"import _regeneratorRuntime from \"C:/YARELI/New/VUE/DogToralia/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/YARELI/New/VUE/DogToralia/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.error.to-string.js\";\nimport \"core-js/modules/es.date.to-json.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport axios from 'axios';\nimport { useToast } from 'vue-toastification';\nexport default {\n  data: function data() {\n    return {\n      nombre: '',\n      telefono: '',\n      correo: '',\n      descripcion: '',\n      profilePhotoPreview: '',\n      negId: this.$route.params.id\n    };\n  },\n  watch: {\n    '$route.params.id': function $routeParamsId(newId) {\n      this.negId = newId;\n    }\n  },\n  methods: {\n    subirImagen: function subirImagen() {\n      this.$refs.fileInput.click();\n    },\n    onFileChange: function onFileChange(event) {\n      var _this = this;\n      var file = event.target.files[0];\n      if (file) {\n        var reader = new FileReader();\n        reader.onload = function (e) {\n          _this.profilePhotoPreview = e.target.result;\n        };\n        reader.readAsDataURL(file);\n      }\n    },\n    filterName: function filterName(event) {\n      var onlyLettersAndSpaces = event.target.value.replace(/[^a-zA-Z\\s]/g, '');\n      this.nombre = onlyLettersAndSpaces;\n    },\n    limpiarError: function limpiarError() {\n      this.errorMessage = '';\n    },\n    validarCampos: function validarCampos(_ref) {\n      var nombre = _ref.nombre,\n        correo = _ref.correo,\n        telefono = _ref.telefono,\n        descripcion = _ref.descripcion;\n      if (!nombre || !correo || !telefono || !descripcion) {\n        return 'Todos los campos son obligatorios.';\n      }\n      if (!this.validarCorreo(correo)) {\n        return 'Correo electrónico no válido. Debe tener un formato como nombre@dominio.com';\n      }\n      if (telefono.length !== 10) {\n        return 'Revisa tu número de teléfono';\n      }\n      return '';\n    },\n    Nuevo: function Nuevo() {\n      var _this2 = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var toast, token, error, myHeaders, raw, requestOptions, response, result, resultado;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              toast = useToast(); // Definir toast aquí\n              token = localStorage.getItem('token');\n              _context.prev = 2;\n              // Validar los campos\n              error = _this2.validarCampos({\n                nombre: _this2.nombre,\n                apellido: _this2.apellido,\n                correo: _this2.correo,\n                password: _this2.password,\n                passwordConfirmar: _this2.passwordConfirmar,\n                telefono: _this2.telefono,\n                rfc: _this2.rfc\n              });\n              console.log('reult:' + error);\n              if (!(error != '')) {\n                _context.next = 9;\n                break;\n              }\n              _this2.errorMessage = error;\n              _context.next = 22;\n              break;\n            case 9:\n              myHeaders = new Headers();\n              myHeaders.append(\"Content-Type\", \"application/json\");\n              raw = JSON.stringify({\n                \"name\": _this2.nombre,\n                \"description\": _this2.apellido,\n                \"price\": _this2.correo,\n                \"currency\": _this2.password,\n                \"duration\": _this2.passwordConfirmar,\n                \"category\": _this2.telefono.toString(),\n                \"rfc\": _this2.rfc\n              });\n              requestOptions = {\n                method: 'POST',\n                headers: myHeaders,\n                body: raw,\n                redirect: 'follow'\n              };\n              _context.next = 15;\n              return fetch(\"http://127.0.0.1:8000/api/services/\".concat(_this2.petId), requestOptions);\n            case 15:\n              response = _context.sent;\n              _context.next = 18;\n              return response.text();\n            case 18:\n              result = _context.sent;\n              resultado = result;\n              console.log(\"resultado:\", resultado);\n              if (resultado.status === 'error') {\n                _this2.errorMessage = resultado.message;\n              } else {\n                _this2.okMessage = \"Usuario creado correctamente.Por favor, inicie sesión\";\n                _this2.nombre = '';\n                _this2.apellido = '';\n                _this2.telefono = '';\n                _this2.correo = '';\n                _this2.password = '';\n                _this2.passwordConfirmar = '';\n              }\n            case 22:\n              _context.next = 28;\n              break;\n            case 24:\n              _context.prev = 24;\n              _context.t0 = _context[\"catch\"](2);\n              console.log('error', _context.t0);\n              _this2.errorMessage = 'Hubo un error en el registro';\n            case 28:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[2, 24]]);\n      }))();\n    }\n  }\n};","map":{"version":3,"names":["axios","useToast","data","nombre","telefono","correo","descripcion","profilePhotoPreview","negId","$route","params","id","watch","$routeParamsId","newId","methods","subirImagen","$refs","fileInput","click","onFileChange","event","_this","file","target","files","reader","FileReader","onload","e","result","readAsDataURL","filterName","onlyLettersAndSpaces","value","replace","limpiarError","errorMessage","validarCampos","_ref","validarCorreo","length","Nuevo","_this2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","toast","token","error","myHeaders","raw","requestOptions","response","resultado","wrap","_callee$","_context","prev","next","localStorage","getItem","apellido","password","passwordConfirmar","rfc","console","log","Headers","append","JSON","stringify","toString","method","headers","body","redirect","fetch","concat","petId","sent","text","status","message","okMessage","t0","stop"],"sources":["C:\\YARELI\\New\\VUE\\DogToralia\\src\\pages\\admin\\servicio\\nuevoServicio.vue"],"sourcesContent":["<template>\r\n    <breadcrumbs title=\"Nuevo Servicio\" main=\"Servicios\" mainPath=\"/nuevo-servicio\" />\r\n      <form class=\"card\" @submit.prevent=\"Nuevo\">\r\n        <div class=\"card-header pb-0\">\r\n          <h4 class=\"card-title mb-0\">Registrar un Nuevo Servicio</h4>\r\n        </div>\r\n        <div class=\"card-body\">\r\n          <div class=\"row\"> \r\n            <div class=\"col-sm-6 col-md-3\"> \r\n              <div class=\"mb-3\">\r\n                <label class=\"form-label f-w-500\">Nombre del Servicio:</label>\r\n                <input v-model=\"nombre\" class=\"form-control\" @input=\"filterName\">\r\n              </div>\r\n            </div>\r\n            <div class=\"col-sm-6 col-md-6\">\r\n              <div class=\"mb-3\">\r\n                <label class=\"form-label f-w-500\">Categoria:</label>\r\n                <input v-model=\"categoria\" class=\"form-control\" @input=\"filterNumbers\" maxlength=\"10\">\r\n              </div>\r\n            </div>\r\n            <div class=\"col-sm-6 col-md-6\">\r\n              <div class=\"mb-3\">\r\n                <label class=\"form-label f-w-500\">Duración:</label>\r\n                <input v-model=\"duracion\" @input=\"limpiarError\" class=\"form-control\" type=\"text\" placeholder=\"correo@gmail.com\">\r\n              </div>\r\n            </div>\r\n            <div class=\"col-sm-6 col-md-6\">\r\n              <div class=\"mb-3\">\r\n                <label class=\"form-label f-w-500\">Precio:</label>\r\n                <input v-model=\"precio\" @input=\"limpiarError\" class=\"form-control\" type=\"text\" placeholder=\"correo@gmail.com\">\r\n              </div>\r\n            </div>\r\n            <!--  -->\r\n            <div class=\"col-sm-6 col-md-4\">\r\n                <div class=\"mb-3\">\r\n                  <label class=\"form-label f-w-500\">Género</label>\r\n                  <div class=\"d-flex\">\r\n                    <div class=\"form-check form-check-inline radio radio-primary\">\r\n                      <input class=\"form-check-input\" id=\"radioinline1\" type=\"radio\" name=\"genero\" value=\"USD\" v-model=\"currency\">\r\n                      <label class=\"form-check-label mb-0\" for=\"radioinline1\">USD</label>\r\n                    </div>\r\n                    <div class=\"form-check form-check-inline radio radio-primary\">\r\n                      <input class=\"form-check-input\" id=\"radioinline1\" type=\"radio\" name=\"genero\" value=\"EUR\" v-model=\"currency\">\r\n                      <label class=\"form-check-label mb-0\" for=\"radioinline1\">EUR</label>\r\n                    </div>\r\n                    <div class=\"form-check form-check-inline radio radio-primary\">\r\n                      <input class=\"form-check-input\" id=\"radioinline2\" type=\"radio\" name=\"genero\" value=\"MXN\" v-model=\"currency\">\r\n                      <label class=\"form-check-label mb-0\" for=\"radioinline2\">MXN</label>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div> \r\n              <!--  -->\r\n            <div class=\"row\">\r\n              <div class=\"col-md-8\">\r\n                <div class=\"mb-3\">\r\n                  <label class=\"form-label f-w-500\">Descripción:</label>\r\n                  <textarea v-model=\"descripcion\" @input=\"limpiarError\" class=\"form-control\" rows=\"5\" placeholder=\"Agrega la descripción del negocio\"></textarea>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"card-footer d-flex justify-content-end\">\r\n          <button class=\"btn btn-secondary\" type=\"submit\">Registrar Negocio</button>\r\n        </div>\r\n      </form>\r\n  </template> \r\n  \r\n  <script>\r\n  import axios from 'axios';\r\n  import { useToast } from 'vue-toastification';\r\n  \r\n  export default {\r\n    data() {\r\n      return {\r\n        nombre: '',\r\n        telefono: '',\r\n        correo: '',\r\n        descripcion: '',\r\n        profilePhotoPreview: '',\r\n        negId: this.$route.params.id,\r\n      };\r\n    },\r\n    watch: {\r\n    '$route.params.id': function(newId) {\r\n      this.negId = newId;\r\n    }\r\n  },\r\n    methods: {\r\n      subirImagen() {\r\n        this.$refs.fileInput.click();\r\n      },\r\n      onFileChange(event) {\r\n        const file = event.target.files[0];\r\n        if (file) {\r\n          const reader = new FileReader();\r\n          reader.onload = e => {\r\n            this.profilePhotoPreview = e.target.result;\r\n          };\r\n          reader.readAsDataURL(file);\r\n        }\r\n      },\r\n      filterName(event) {\r\n        const onlyLettersAndSpaces = event.target.value.replace(/[^a-zA-Z\\s]/g, '');\r\n        this.nombre = onlyLettersAndSpaces;\r\n      },\r\n      limpiarError() {\r\n        this.errorMessage = '';\r\n      },\r\n      \r\n      validarCampos({ nombre, correo, telefono, descripcion }) {\r\n        if (!nombre || !correo || !telefono || !descripcion) {\r\n          return 'Todos los campos son obligatorios.';\r\n        }\r\n        if (!this.validarCorreo(correo)) {\r\n          return 'Correo electrónico no válido. Debe tener un formato como nombre@dominio.com';\r\n        }\r\n        if (telefono.length !== 10) {\r\n          return 'Revisa tu número de teléfono';\r\n        }\r\n        return '';\r\n      },\r\n      async Nuevo() {\r\n        const toast = useToast(); // Definir toast aquí\r\n        const token = localStorage.getItem('token');\r\n        try {\r\n       // Validar los campos\r\n       const error = this.validarCampos({\r\n          nombre: this.nombre,\r\n          apellido: this.apellido,\r\n          correo: this.correo,\r\n          password: this.password,\r\n          passwordConfirmar: this.passwordConfirmar,\r\n          telefono: this.telefono,\r\n          rfc: this.rfc,\r\n        });\r\n        console.log('reult:'+error)\r\n        if (error!='') {\r\n          this.errorMessage = error;\r\n        }\r\n        else{\r\n\r\n       \r\n\r\n          var myHeaders = new Headers();\r\n          myHeaders.append(\"Content-Type\", \"application/json\");\r\n\r\n          var raw = JSON.stringify({\r\n            \"name\": this.nombre,\r\n            \"description\": this.apellido,\r\n            \"price\": this.correo,\r\n            \"currency\": this.password,\r\n            \"duration\": this.passwordConfirmar,\r\n            \"category\": this.telefono.toString(),\r\n            \"rfc\": this.rfc,\r\n          });\r\n\r\n          var requestOptions = {\r\n            method: 'POST',\r\n            headers: myHeaders,\r\n            body: raw,\r\n            redirect: 'follow'\r\n          };\r\n\r\n        const response=await  fetch(`http://127.0.0.1:8000/api/services/${this.petId}`, requestOptions);\r\n        const result= await response.text();                \r\n        const resultado= (result);           \r\n             \r\n            console.log(\"resultado:\",resultado);\r\n            if(resultado.status ==='error')  {\r\n                 this.errorMessage = resultado.message;           \r\n              }  else {                  \r\n                this.okMessage = \"Usuario creado correctamente.Por favor, inicie sesión\";  \r\n                this.nombre= '';\r\n                this.apellido= '';\r\n                this.telefono= '';\r\n                this.correo =  '';\r\n                this.password = '';\r\n                this.passwordConfirmar =  '';                        \r\n              }\r\n        }\r\n          } catch (error) \r\n            {\r\n              console.log('error',error);\r\n              this.errorMessage='Hubo un error en el registro';\r\n            \r\n            } \r\n       \r\n       \r\n       \r\n       \r\n       \r\n       \r\n       \r\n       \r\n       \r\n       \r\n       \r\n       \r\n       \r\n       \r\n        // if (!token) {\r\n        //   toast.warning('No se encontró ningún token, redireccionando para iniciar sesión');\r\n        //   this.$router.push('/auth/login');\r\n        //   return;\r\n        // }\r\n  \r\n        // const error = this.validarCampos({\r\n        //   nombre: this.nombre,\r\n        //   telefono: this.telefono,\r\n        //   correo: this.correo,\r\n        //   descripcion: this.descripcion,\r\n        // });\r\n  \r\n        // if (error) {\r\n        //   toast.warning(error);\r\n        //   return;\r\n        // }\r\n\r\n\r\n  \r\n        \r\n      }\r\n    }\r\n  };\r\n  </script>\r\n  \r\n  <style>\r\n  .profile-photo {\r\n    width: 450px; \r\n    height: 450px; \r\n    object-fit: cover; \r\n  }\r\n  </style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}