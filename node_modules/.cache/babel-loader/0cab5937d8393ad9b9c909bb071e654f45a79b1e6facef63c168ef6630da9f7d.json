{"ast":null,"code":"import \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, normalizeStyle as _normalizeStyle, createTextVNode as _createTextVNode } from \"vue\";\nvar _hoisted_1 = {\n  \"class\": \"col-12 colorfull-kanban\"\n};\nvar _hoisted_2 = {\n  \"class\": \"card-body pb-0\"\n};\nvar _hoisted_3 = {\n  \"class\": \"d-flex row\",\n  id: \"demo2\"\n};\nvar _hoisted_4 = {\n  \"class\": \"kanban-board col-xxl-4 col-md-12\",\n  style: {\n    \"width\": \"400px\",\n    \"margin-left\": \"10px\",\n    \"margin-right\": \"10px\"\n  }\n};\nvar _hoisted_5 = {\n  \"class\": \"kanban-title-board\",\n  style: {\n    \"font-size\": \"1.2em\",\n    \"font-weight\": \"bold\"\n  }\n};\nvar _hoisted_6 = {\n  \"class\": \"card-body\"\n};\nvar _hoisted_7 = {\n  \"class\": \"f-w-600\"\n};\nvar _hoisted_8 = {\n  \"class\": \"f-w-300\"\n};\nvar _hoisted_9 = {\n  \"class\": \"f-w-600\"\n};\nvar _hoisted_10 = {\n  \"class\": \"f-w-300\"\n};\nvar _hoisted_11 = {\n  \"class\": \"f-w-600\"\n};\nvar _hoisted_12 = {\n  \"class\": \"f-w-300\"\n};\nvar _hoisted_13 = {\n  div: \"\",\n  \"class\": \"d-flex\"\n};\nvar _hoisted_14 = [\"onClick\"];\nvar _hoisted_15 = /*#__PURE__*/_createElementVNode(\"i\", {\n  \"class\": \"icofont icofont-ui-delete\"\n}, null, -1 /* HOISTED */);\nvar _hoisted_16 = [_hoisted_15];\nvar _hoisted_17 = [\"onClick\"];\nvar _hoisted_18 = /*#__PURE__*/_createElementVNode(\"i\", {\n  \"class\": \"icofont icofont-pencil-alt-2\"\n}, null, -1 /* HOISTED */);\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.servi, function (servi, index) {\n    return _openBlock(), _createElementBlock(\"div\", {\n      \"class\": \"kanban-container\",\n      key: servi.id\n    }, [_createElementVNode(\"div\", _hoisted_4, [_createCommentVNode(\" Genera estilos aleatorios para cada tarjeta \"), _createElementVNode(\"div\", {\n      style: _normalizeStyle(_ctx.styles = $options.getRandomStyle())\n    }, [_createElementVNode(\"header\", {\n      \"class\": \"kanban-board-header\",\n      style: _normalizeStyle(_ctx.styles.headerStyle)\n    }, [_createElementVNode(\"div\", _hoisted_5, _toDisplayString(servi.name), 1 /* TEXT */)], 4 /* STYLE */), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", {\n      \"class\": \"kanban-item\",\n      style: _normalizeStyle(_ctx.styles.bodyStyle)\n    }, [_createElementVNode(\"h5\", _hoisted_7, [_createTextVNode(\"Descripción: \"), _createElementVNode(\"h5\", _hoisted_8, _toDisplayString(servi.description), 1 /* TEXT */)]), _createElementVNode(\"h5\", _hoisted_9, [_createTextVNode(\"Precio: \"), _createElementVNode(\"h5\", _hoisted_10, _toDisplayString(servi.price) + \" \" + _toDisplayString(servi.currency), 1 /* TEXT */)]), _createElementVNode(\"h5\", _hoisted_11, [_createTextVNode(\"Duración: \"), _createElementVNode(\"h5\", _hoisted_12, _toDisplayString(servi.duration) + \" min\", 1 /* TEXT */)])], 4 /* STYLE */), _createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"button\", {\n      \"class\": \"btn btn-outline-danger mx-1\",\n      onClick: function onClick($event) {\n        return $options.eliminar(servi.id);\n      }\n    }, [].concat(_hoisted_16), 8 /* PROPS */, _hoisted_14), _createElementVNode(\"button\", {\n      \"class\": \"btn btn-outline-success-2x\",\n      onClick: function onClick($event) {\n        return $options.verDetalle(servi.id);\n      }\n    }, [_createCommentVNode(\" <i class=\\\"icon-eye\\\"></i> \"), _hoisted_18], 8 /* PROPS */, _hoisted_17)])])], 4 /* STYLE */)])]);\n  }), 128 /* KEYED_FRAGMENT */))])])]);\n}","map":{"version":3,"names":["id","style","div","_createElementVNode","_hoisted_15","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_Fragment","_renderList","$data","servi","index","key","_hoisted_4","_createCommentVNode","_normalizeStyle","_ctx","styles","$options","getRandomStyle","headerStyle","_hoisted_5","_toDisplayString","name","_hoisted_6","bodyStyle","_hoisted_7","_createTextVNode","_hoisted_8","description","_hoisted_9","_hoisted_10","price","currency","_hoisted_11","_hoisted_12","duration","_hoisted_13","onClick","$event","eliminar","_hoisted_16","_hoisted_14","verDetalle","_hoisted_18","_hoisted_17"],"sources":["C:\\YARELI\\New\\VUE\\DogToralia\\src\\pages\\admin\\servicio\\servicios.vue"],"sourcesContent":["<template>\r\n    <div class=\"col-12 colorfull-kanban\">\r\n        <div class=\"card-body pb-0\">\r\n          <div class=\"d-flex row\" id=\"demo2\">\r\n                <div class=\"kanban-container\" v-for=\"(servi, index) in servi\" :key=\"servi.id\">\r\n                <div class=\"kanban-board col-xxl-4 col-md-12\" style=\"width: 400px; margin-left: 10px; margin-right: 10px\">\r\n                    <!-- Genera estilos aleatorios para cada tarjeta -->\r\n                    <div :style=\"styles = getRandomStyle()\">\r\n                        <header class=\"kanban-board-header\" :style=\"styles.headerStyle\">\r\n                            <div class=\"kanban-title-board\" style=\"font-size: 1.2em; font-weight: bold;\">{{ servi.name }}</div>\r\n                        </header>\r\n                        <div class=\"card-body\">\r\n                            <div class=\"kanban-item\" :style=\"styles.bodyStyle\">\r\n                                <h5 class=\"f-w-600\">Descripción:\r\n                                    <h5 class=\"f-w-300\">{{ servi.description }}</h5>\r\n                                </h5>\r\n                                <h5 class=\"f-w-600\">Precio:\r\n                                    <h5 class=\"f-w-300\">{{ servi.price }} {{ servi.currency }}</h5> \r\n                                </h5>\r\n                                <h5 class=\"f-w-600\">Duración:\r\n                                    <h5 class=\"f-w-300\">{{ servi.duration }} min</h5>\r\n                                </h5>\r\n                           </div>\r\n                           <div div class=\"d-flex \">\r\n                        <button class=\"btn btn-outline-danger mx-1\" @click=\"eliminar(servi.id)\">\r\n                            <i class=\"icofont icofont-ui-delete\"></i>\r\n                        </button>\r\n                        <button class=\"btn btn-outline-success-2x\" @click=\"verDetalle(servi.id)\">\r\n                            <!-- <i class=\"icon-eye\"></i> -->\r\n                            <i class=\"icofont icofont-pencil-alt-2\"></i>\r\n                        </button>\r\n                        </div>\r\n                        </div>\r\n                       \r\n                    </div>\r\n                        \r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n  <script>\r\n  import axios from 'axios';\r\n  import Swal from 'sweetalert2';\r\n  import { mapActions } from 'vuex';\r\n  export default {\r\n    props: {\r\n      negocioId: {\r\n        type: Number,\r\n        required: true\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        servi: [],  // Asegúrate de definir el array para almacenar los servicios\r\n      };\r\n    },\r\n    created() {\r\n      this.obtenerServicios();\r\n    },\r\n    methods: {\r\n      // ...mapActions(['refreshToken']),\r\n      verDetalle(id) {\r\n      this.$router.push({ name: 'verServicio', params: { id: id } });\r\n    },\r\n    getRandomStyle() {\r\n        const colors = [\r\n            { light: '#a2d9ff', dark: '#4faad5' }, \r\n            { light: '#c2eaf2', dark: '#4faad5' }, \r\n            { light: '#b0d8eb', dark: '#4faad5' }, \r\n            { light: '#f7d794', dark: '#e6ae30' },\r\n            { light: '#d4a1d4', dark: '#9b59b6' },\r\n            { light: '#a3d9a5', dark: '#61ae41' }, \r\n            { light: '#f5b7b1', dark: '#e74c3c' }, \r\n        ];\r\n            const randomColor = colors[Math.floor(Math.random() * colors.length)];\r\n        return {\r\n            headerStyle: {\r\n            backgroundColor: randomColor.dark,\r\n            color: 'white',\r\n            padding: '10px',\r\n            borderRadius: '8px 8px 0 0'\r\n            },\r\n            bodyStyle: {\r\n            backgroundColor: randomColor.light,\r\n            padding: '25px',\r\n            borderRadius: '0 0 8px 8px'\r\n            }\r\n        };\r\n},\r\nasync obtenerServicios() {\r\n  const token = localStorage.getItem('token');\r\n\r\n            // const newToken = await this.refreshToken();\r\n            // const token = newToken || localStorage.getItem('token');\r\n            if (!token) {\r\n        this.errorMessage = 'No se encontró ningún token, redireccionando para iniciar sesión';\r\n        this.$router.push('/auth/login');\r\n        return;\r\n      }\r\n        try {\r\n          const response = await axios.get(`http://127.0.0.1:8000/api/services/business/${this.negocioId}`);\r\n          this.servi = response.data.services.data;  // Guarda los datos de los servicios en el array\r\n          console.log(this.servi);  // Opcional: para ver qué se está guardando\r\n        } catch (error) {\r\n          console.error(\"Error al obtener los servicios:\", error);\r\n        }\r\n      },\r\n      eliminar(id) {\r\n        \r\n      Swal.fire({\r\n        title: '¿Está seguro de eliminar este servicio?',\r\n        icon: 'warning',\r\n        showCancelButton: true,\r\n        confirmButtonColor: '#3085d6',\r\n        cancelButtonColor: '#d33',\r\n        confirmButtonText: 'Sí, eliminar',\r\n        cancelButtonText: 'Cancelar',\r\n      }).then((result) => {\r\n        if (result.isConfirmed) {\r\n          const token = localStorage.getItem('token');\r\n            // const newToken = await this.refreshToken();\r\n            // const token = newToken || localStorage.getItem('token');\r\n          if (!token) {\r\n            this.errorMessage = 'No se encontró ningún token, redireccionando para iniciar sesión';\r\n            this.$router.push('/auth/login');\r\n            return;\r\n          }\r\n          const myHeaders = new Headers();\r\n          myHeaders.append(\"Content-Type\", \"application/json\");\r\n          myHeaders.append(\"Authorization\", `Bearer ${token}`);\r\n          const requestOptions = {\r\n            method: \"DELETE\", \r\n            headers: myHeaders,\r\n            redirect: \"follow\",\r\n          };\r\n          fetch(`http://127.0.0.1:8000/api/services/${id}`, requestOptions)\r\n            .then(response => response.json())\r\n            .then(result => {\r\n                if (result.status === 'success') {\r\n                  Swal.fire(\r\n                    'Eliminado!',\r\n                    'El servicio ha sido eliminado correctamente.',\r\n                    'success'\r\n                  );\r\n                  this.obtenerServicios(); // Asegúrate de que listarNegocios esté definido y vinculado correctamente\r\n                } else {\r\n                  Swal.fire(\r\n                    'Error!',\r\n                    result.message || 'Hubo un problema al eliminar el servicio.',\r\n                    'error'\r\n                  );\r\n                }\r\n              })\r\n            .catch(err => {\r\n              console.error('Error al eliminar el servicio:', err);\r\n              Swal.fire(\r\n                'Error!',\r\n                'Hubo un problema al eliminar el servicio.',\r\n                'error'\r\n              );\r\n            });\r\n        }\r\n      });\r\n    },\r\n\r\n\r\n\r\n    }\r\n  };\r\n  </script>\r\n  \r\n  <style>\r\n\r\n  </style>"],"mappings":";;;;;;EACS,SAAM;AAAyB;;EAC3B,SAAM;AAAgB;;EACpB,SAAM,YAAY;EAACA,EAAE,EAAC;;;EAEhB,SAAM,kCAAkC;EAACC,KAA2D,EAA3D;IAAA;IAAA;IAAA;EAAA;;;EAI7B,SAAM,oBAAoB;EAACA,KAA4C,EAA5C;IAAA;IAAA;EAAA;;;EAE/B,SAAM;AAAW;;EAEV,SAAM;AAAS;;EACX,SAAM;AAAS;;EAEnB,SAAM;AAAS;;EACX,SAAM;AAAS;;EAEnB,SAAM;AAAS;;EACX,SAAM;AAAS;;EAGvBC,GAAG,EAAH,EAAG;EAAC,SAAM;;kBAvB1C;+BAyB4BC,mBAAA,CAAyC;EAAtC,SAAM;AAA2B;mBAApCC,WAAyC,C;kBAzBrE;+BA6B4BD,mBAAA,CAA4C;EAAzC,SAAM;AAA8B;;uBA5B/DE,mBAAA,CAuCM,OAvCNC,UAuCM,GAtCFH,mBAAA,CAqCM,OArCNI,UAqCM,GApCJJ,mBAAA,CAmCQ,OAnCRK,UAmCQ,I,kBAlCFH,mBAAA,CAiCMI,SAAA,QArCtBC,WAAA,CAIuEC,KAAA,CAAAC,KAAK,EAJ5E,UAIsDA,KAAK,EAAEC,KAAK;yBAAlDR,mBAAA,CAiCM;MAjCD,SAAM,kBAAkB;MAAkCS,GAAG,EAAEF,KAAK,CAACZ;QAC1EG,mBAAA,CA+BU,OA/BVY,UA+BU,GA9BNC,mBAAA,iDAAoD,EACpDb,mBAAA,CA2BM;MA3BAF,KAAK,EAP/BgB,eAAA,CAOiCC,IAAA,CAAAC,MAAM,GAAGC,QAAA,CAAAC,cAAc;QAChClB,mBAAA,CAES;MAFD,SAAM,qBAAqB;MAAEF,KAAK,EARlEgB,eAAA,CAQoEC,IAAA,CAAAC,MAAM,CAACG,WAAW;QAC1DnB,mBAAA,CAAmG,OAAnGoB,UAAmG,EAAAC,gBAAA,CAAnBZ,KAAK,CAACa,IAAI,iB,kBAE9FtB,mBAAA,CAqBM,OArBNuB,UAqBM,GApBFvB,mBAAA,CAUK;MAVA,SAAM,aAAa;MAAEF,KAAK,EAZ3DgB,eAAA,CAY6DC,IAAA,CAAAC,MAAM,CAACQ,SAAS;QAC7CxB,mBAAA,CAEK,MAFLyB,UAEK,GAfrCC,gBAAA,CAaoD,eAChB,GAAA1B,mBAAA,CAAgD,MAAhD2B,UAAgD,EAAAN,gBAAA,CAAzBZ,KAAK,CAACmB,WAAW,iB,GAE5C5B,mBAAA,CAEK,MAFL6B,UAEK,GAlBrCH,gBAAA,CAgBoD,UAChB,GAAA1B,mBAAA,CAA+D,MAA/D8B,WAA+D,EAAAT,gBAAA,CAAxCZ,KAAK,CAACsB,KAAK,IAAG,GAAC,GAAAV,gBAAA,CAAGZ,KAAK,CAACuB,QAAQ,iB,GAE3DhC,mBAAA,CAEK,MAFLiC,WAEK,GArBrCP,gBAAA,CAmBoD,YAChB,GAAA1B,mBAAA,CAAiD,MAAjDkC,WAAiD,EAAAb,gBAAA,CAA1BZ,KAAK,CAAC0B,QAAQ,IAAG,MAAI,gB,oBAGrDnC,mBAAA,CAQG,OARHoC,WAQG,GAPNpC,mBAAA,CAES;MAFD,SAAM,6BAA6B;MAAEqC,OAAK,WAAAA,QAAAC,MAAA;QAAA,OAAErB,QAAA,CAAAsB,QAAQ,CAAC9B,KAAK,CAACZ,EAAE;MAAA;iBAxB7F2C,WAAA,kBAAAC,WAAA,GA2BwBzC,mBAAA,CAGS;MAHD,SAAM,4BAA4B;MAAEqC,OAAK,WAAAA,QAAAC,MAAA;QAAA,OAAErB,QAAA,CAAAyB,UAAU,CAACjC,KAAK,CAACZ,EAAE;MAAA;QAClEgB,mBAAA,gCAAiC,EACjC8B,WAA4C,C,iBA7BxEC,WAAA,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}