{"ast":null,"code":"import _regeneratorRuntime from \"C:/YARELI/New/VUE/DogToralia/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/YARELI/New/VUE/DogToralia/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.error.cause.js\";\nimport \"core-js/modules/es.error.to-string.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.splice.js\";\nimport \"core-js/modules/es.date.to-json.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport { useToast } from 'vue-toastification';\nexport default {\n  data: function data() {\n    return {\n      busiId: this.$route.params.id,\n      // Iniciar con los 7 días de la semana\n      schedule: [{\n        day_of_week: 'Lunes',\n        time_slots: [{\n          start_time: '',\n          end_time: ''\n        }]\n      }, {\n        day_of_week: 'Martes',\n        time_slots: [{\n          start_time: '',\n          end_time: ''\n        }]\n      }, {\n        day_of_week: 'Miércoles',\n        time_slots: [{\n          start_time: '',\n          end_time: ''\n        }]\n      }, {\n        day_of_week: 'Jueves',\n        time_slots: [{\n          start_time: '',\n          end_time: ''\n        }]\n      }, {\n        day_of_week: 'Viernes',\n        time_slots: [{\n          start_time: '',\n          end_time: ''\n        }]\n      }, {\n        day_of_week: 'Sábado',\n        time_slots: [{\n          start_time: '',\n          end_time: ''\n        }]\n      }, {\n        day_of_week: 'Domingo',\n        time_slots: [{\n          start_time: '',\n          end_time: ''\n        }]\n      }]\n    };\n  },\n  setup: function setup() {\n    var toast = useToast();\n    return {\n      toast: toast\n    };\n  },\n  methods: {\n    // Método para añadir una nueva franja horaria a un día específico\n    addSlot: function addSlot(index) {\n      this.schedule[index].time_slots.push({\n        start_time: '',\n        end_time: ''\n      });\n    },\n    // Método para eliminar una franja horaria de un día específico\n    removeSlot: function removeSlot(dayIndex, slotIndex) {\n      this.schedule[dayIndex].time_slots.splice(slotIndex, 1);\n    },\n    // Método para añadir un nuevo día\n    addDay: function addDay() {\n      this.schedule.push({\n        day_of_week: '',\n        time_slots: [{\n          start_time: '',\n          end_time: ''\n        }]\n      });\n    },\n    // Método para registrar el horario\n    submitSchedule: function submitSchedule() {\n      var _this = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var token, response, data;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              token = localStorage.getItem('token');\n              if (token) {\n                _context.next = 5;\n                break;\n              }\n              _this.errorMessage = 'No se encontró ningún token, redireccionando para iniciar sesión';\n              _this.$router.push('/auth/login');\n              return _context.abrupt(\"return\");\n            case 5:\n              _context.prev = 5;\n              _context.next = 8;\n              return fetch(\"http://127.0.0.1:8000/api/business/schedule/\".concat(_this.busiId), {\n                method: 'POST',\n                headers: {\n                  'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                  schedule: _this.schedule\n                })\n              });\n            case 8:\n              response = _context.sent;\n              if (response.ok) {\n                _context.next = 11;\n                break;\n              }\n              throw new Error('Error al registrar el horario');\n            case 11:\n              _context.next = 13;\n              return response.json();\n            case 13:\n              data = _context.sent;\n              _this.toast.success('Horario registrado correctamente.');\n              _context.next = 20;\n              break;\n            case 17:\n              _context.prev = 17;\n              _context.t0 = _context[\"catch\"](5);\n              _this.toast.error('Hubo un error en el registro.');\n            case 20:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[5, 17]]);\n      }))();\n    }\n  }\n};","map":{"version":3,"names":["useToast","data","busiId","$route","params","id","schedule","day_of_week","time_slots","start_time","end_time","setup","toast","methods","addSlot","index","push","removeSlot","dayIndex","slotIndex","splice","addDay","submitSchedule","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","token","response","wrap","_callee$","_context","prev","next","localStorage","getItem","errorMessage","$router","abrupt","fetch","concat","method","headers","body","JSON","stringify","sent","ok","Error","json","success","t0","error","stop"],"sources":["C:\\YARELI\\New\\VUE\\DogToralia\\src\\pages\\admin\\horarios\\regisHorario.vue"],"sourcesContent":["<template>\r\n  <div class=\"card\">\r\n    <div class=\"container mt-5\">\r\n      <h1 class=\"text-center\">Registrar Horario {{ busiId }}</h1>\r\n\r\n      <form @submit.prevent=\"submitSchedule\">\r\n        <div v-for=\"(day, index) in schedule\" :key=\"index\" class=\"mb-4\">\r\n          <h4>{{ day.day_of_week }}</h4>\r\n<!--  -->\r\n          <div class=\"d-flex justify-content-end\">\r\n            <button class=\"btn btn-info mt-2\" @click.prevent=\"addSlot(index)\">Añadir Franja Horaria</button>\r\n          </div>\r\n          <div v-for=\"(slot, idx) in day.time_slots\" :key=\"idx\" class=\"row mb-2\">\r\n            <div class=\"col-sm-6 col-md-3\">\r\n              <label >Apertura</label>\r\n              <input type=\"time\" v-model=\"slot.start_time\" class=\"form-control\" required />\r\n            </div>\r\n            <div class=\"col-sm-6 col-md-3\">\r\n              <label >Cierre</label>\r\n              <input type=\"time\" v-model=\"slot.end_time\" class=\"form-control\" required />\r\n            </div>\r\n              <div class=\"col-2 d-flex align-items-end\">\r\n              <span @click=\"removeSlot(index, idx)\">\r\n                <i class=\"icofont icofont-close-circled font-danger fs-4\"></i>\r\n              </span>\r\n              <!-- <button type=\"submit\" class=\"btn btn-primary mt-4 ms-5\">Fijar</button> -->\r\n              <button class=\"btn btn-primary mt-4 ms-5\" @click.prevent=\"fixSlot(index, idx)\">Fijar</button>\r\n            </div>\r\n            \r\n          </div>          \r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { useToast } from 'vue-toastification';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      busiId: this.$route.params.id,\r\n      // Iniciar con los 7 días de la semana\r\n      schedule: [\r\n        { day_of_week: 'Lunes', time_slots: [{ start_time: '', end_time: '' }] },\r\n        { day_of_week: 'Martes', time_slots: [{ start_time: '', end_time: '' }] },\r\n        { day_of_week: 'Miércoles', time_slots: [{ start_time: '', end_time: '' }] },\r\n        { day_of_week: 'Jueves', time_slots: [{ start_time: '', end_time: '' }] },\r\n        { day_of_week: 'Viernes', time_slots: [{ start_time: '', end_time: '' }] },\r\n        { day_of_week: 'Sábado', time_slots: [{ start_time: '', end_time: '' }] },\r\n        { day_of_week: 'Domingo', time_slots: [{ start_time: '', end_time: '' }] }\r\n      ]\r\n    };\r\n  },\r\n  setup() {\r\n    const toast = useToast();\r\n    return { toast };\r\n  },\r\n  methods: {\r\n    // Método para añadir una nueva franja horaria a un día específico\r\n    addSlot(index) {\r\n      this.schedule[index].time_slots.push({ start_time: '', end_time: '' });\r\n    },\r\n    \r\n    // Método para eliminar una franja horaria de un día específico\r\n    removeSlot(dayIndex, slotIndex) {\r\n      this.schedule[dayIndex].time_slots.splice(slotIndex, 1);\r\n    },\r\n    \r\n    // Método para añadir un nuevo día\r\n    addDay() {\r\n      this.schedule.push({\r\n        day_of_week: '',\r\n        time_slots: [{ start_time: '', end_time: '' }]\r\n      });\r\n    },\r\n    \r\n    // Método para registrar el horario\r\n    async submitSchedule() {\r\n      const token = localStorage.getItem('token');\r\n      if (!token) {\r\n        this.errorMessage = 'No se encontró ningún token, redireccionando para iniciar sesión';\r\n        this.$router.push('/auth/login');\r\n        return;\r\n      } \r\n\r\n      try {\r\n        const response = await fetch(`http://127.0.0.1:8000/api/business/schedule/${this.busiId}`, {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify({ schedule: this.schedule })\r\n        });\r\n\r\n        if (!response.ok) throw new Error('Error al registrar el horario');\r\n        \r\n        const data = await response.json();\r\n        this.toast.success('Horario registrado correctamente.');\r\n      } catch (error) {\r\n        this.toast.error('Hubo un error en el registro.');\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}