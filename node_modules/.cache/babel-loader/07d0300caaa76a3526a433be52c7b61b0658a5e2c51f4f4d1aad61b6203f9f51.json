{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nvar _hoisted_1 = {\n  \"class\": \"card\"\n};\nvar _hoisted_2 = {\n  \"class\": \"card-header pb-0\"\n};\nvar _hoisted_3 = {\n  \"class\": \"h3 txt-success\"\n};\nvar _hoisted_4 = /*#__PURE__*/_createElementVNode(\"span\", null, \"Selecciona la ubicación de tu negocio en el mapa y envia la ubicación\", -1 /* HOISTED */);\nvar _hoisted_5 = {\n  \"class\": \"card-body\"\n};\nvar _hoisted_6 = {\n  \"class\": \"card-footer d-flex justify-content-between\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_l_tile_layer = _resolveComponent(\"l-tile-layer\");\n  var _component_l_marker = _resolveComponent(\"l-marker\");\n  var _component_l_map = _resolveComponent(\"l-map\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"h3\", _hoisted_3, \" Direccion \" + _toDisplayString($props.userId), 1 /* TEXT */), _hoisted_4]), _createElementVNode(\"div\", _hoisted_5, [_createVNode(_component_l_map, {\n    zoom: 13,\n    center: $data.center,\n    style: {\n      \"height\": \"500px\",\n      \"width\": \"100%\"\n    },\n    onClick: $options.setLocation\n  }, {\n    \"default\": _withCtx(function () {\n      return [_createVNode(_component_l_tile_layer, {\n        url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      }), _createVNode(_component_l_marker, {\n        \"lat-lng\": $data.marker\n      }, null, 8 /* PROPS */, [\"lat-lng\"])];\n    }),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"center\", \"onClick\"]), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"p\", null, \"Latitud: \" + _toDisplayString($data.marker.lat), 1 /* TEXT */), _createElementVNode(\"p\", null, \"Longitud: \" + _toDisplayString($data.marker.lng), 1 /* TEXT */), _createElementVNode(\"button\", {\n    \"class\": \"btn btn-secondary\",\n    onClick: _cache[0] || (_cache[0] = function () {\n      return $options.submitLocation && $options.submitLocation.apply($options, arguments);\n    })\n  }, \"Enviar ubicación\")])])]);\n}","map":{"version":3,"names":["_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_toDisplayString","$props","userId","_hoisted_4","_hoisted_5","_createVNode","_component_l_map","zoom","center","$data","style","onClick","$options","setLocation","_withCtx","_component_l_tile_layer","url","_component_l_marker","marker","_","_hoisted_6","lat","lng","_cache","submitLocation","apply","arguments"],"sources":["C:\\YARELI\\New\\VUE\\DogToralia\\src\\pages\\admin\\geoNeg.vue"],"sourcesContent":["<template>\r\n    <div class=\"card\">\r\n        <div class=\"card-header pb-0\">\r\n        <h3 class=\"h3 txt-success\"> Direccion {{ userId }} </h3>\r\n        <span>Selecciona la ubicación de tu negocio en el mapa y envia la ubicación</span>\r\n      </div>\r\n    <div class=\"card-body\">\r\n      <l-map\r\n        :zoom=\"13\"\r\n        :center=\"center\"\r\n        style=\"height: 500px; width: 100%;\"\r\n        @click=\"setLocation\"\r\n      >\r\n        <l-tile-layer\r\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n        ></l-tile-layer>\r\n        <l-marker :lat-lng=\"marker\"></l-marker>\r\n      </l-map>\r\n  \r\n      <div class=\"card-footer d-flex justify-content-between\">\r\n        <p >Latitud: {{ marker.lat }}</p>\r\n        <p >Longitud: {{ marker.lng }}</p>\r\n       \r\n        <button class=\"btn btn-secondary\" @click=\"submitLocation\">Enviar ubicación</button>\r\n        \r\n      </div>\r\n    </div>\r\n</div>\r\n  </template>\r\n  \r\n  <script>\r\n  \r\n  import { LMap, LTileLayer, LMarker } from '@vue-leaflet/vue-leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\n//   import { LMap, LTileLayer, LMarker } from \"vue-leaflet\";\r\n//   import \"leaflet/dist/leaflet.css\";\r\n  import axios from \"axios\";\r\n  import { useToast } from 'vue-toastification';\r\n  \r\n  export default {\r\n    props: {\r\n    userId: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n  },\r\n    components: {\r\n      LMap,\r\n      LTileLayer,\r\n      LMarker,\r\n    },\r\n    data() {\r\n      return {\r\n        center: [19.3942, -99.0757], // Coordenadas iniciales\r\n        marker: {\r\n          lat: 19.3942,\r\n          lng: -99.0757,\r\n        \r\n        },\r\n      };\r\n    },    \r\n    methods: {\r\n        //   ...mapActions(['refreshToken']),\r\n      setLocation(event) {\r\n        // Actualiza la ubicación del marcador\r\n        this.marker = {\r\n          lat: event.latlng.lat,\r\n          lng: event.latlng.lng,\r\n        };\r\n      },\r\n      async submitLocation() {\r\n        const toast = useToast(); // Definir toast aquí\r\n        // Enviar la latitud y longitud a la API\r\n        const token = localStorage.getItem('token');\r\n        const data = {\r\n          lat: this.marker.lat,\r\n          lon: this.marker.lng,\r\n        };\r\n  \r\n                    try {\r\n                const response = await axios.post(\r\n                `http://127.0.0.1:8000/api/business/set-address/${this.userId}`,\r\n                data,\r\n                {\r\n                    headers: {\r\n                    Authorization: `Bearer ${token}`,\r\n                    },\r\n                }\r\n                );\r\n                // alert('Ubicación enviada correctamente');\r\n                toast.success('Ubicación Registrada correctamente.');\r\n            } catch (error) {\r\n                console.error(error);\r\n                // alert('Error al enviar la ubicación');\r\n                toast.error(response.data.message || 'Error al enviar la ubicación');\r\n            }\r\n      },\r\n    },\r\n  };\r\n  </script>\r\n  \r\n  <style>\r\n  /* Ajusta el tamaño del mapa */\r\n  .l-map {\r\n    height: 500px;\r\n    width: 100%;\r\n  }\r\n  </style>"],"mappings":";;EACS,SAAM;AAAM;;EACR,SAAM;AAAkB;;EACzB,SAAM;AAAgB;8BAC1BA,mBAAA,CAAkF,cAA5E,uEAAqE;;EAE1E,SAAM;AAAW;;EAaf,SAAM;AAA4C;;;;;uBAlBzDC,mBAAA,CA0BE,OA1BFC,UA0BE,GAzBEF,mBAAA,CAGI,OAHJG,UAGI,GAFJH,mBAAA,CAAwD,MAAxDI,UAAwD,EAA7B,aAAW,GAAAC,gBAAA,CAAGC,MAAA,CAAAC,MAAM,kBAC/CC,UAAkF,C,GAEtFR,mBAAA,CAoBM,OApBNS,UAoBM,GAnBJC,YAAA,CAUQC,gBAAA;IATLC,IAAI,EAAE,EAAE;IACRC,MAAM,EAAEC,KAAA,CAAAD,MAAM;IACfE,KAAmC,EAAnC;MAAA;MAAA;IAAA,CAAmC;IAClCC,OAAK,EAAEC,QAAA,CAAAC;;IAXhB,WAAAC,QAAA,CAaQ;MAAA,OAEgB,CAFhBT,YAAA,CAEgBU,uBAAA;QADdC,GAAG,EAAC;MAAoD,IAE1DX,YAAA,CAAuCY,mBAAA;QAA5B,SAAO,EAAER,KAAA,CAAAS;MAAM,qC;;IAhBlCC,CAAA;4CAmBMxB,mBAAA,CAMM,OANNyB,UAMM,GALJzB,mBAAA,CAAiC,WAA7B,WAAS,GAAAK,gBAAA,CAAGS,KAAA,CAAAS,MAAM,CAACG,GAAG,kBAC1B1B,mBAAA,CAAkC,WAA9B,YAAU,GAAAK,gBAAA,CAAGS,KAAA,CAAAS,MAAM,CAACI,GAAG,kBAE3B3B,mBAAA,CAAmF;IAA3E,SAAM,mBAAmB;IAAEgB,OAAK,EAAAY,MAAA,QAAAA,MAAA;MAAA,OAAEX,QAAA,CAAAY,cAAA,IAAAZ,QAAA,CAAAY,cAAA,CAAAC,KAAA,CAAAb,QAAA,EAAAc,SAAA,CAAc;IAAA;KAAE,kBAAgB,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}